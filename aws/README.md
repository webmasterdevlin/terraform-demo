## Terraform in AWS

#### Requirements

- installed [Terraform CLI](https://www.terraform.io/downloads.html)
- installed [AWS CLI v1](https://docs.aws.amazon.com/cli/latest/userguide/install-cliv1.html)
- installed [AWS CLI v2](https://docs.aws.amazon.com/cli/latest/userguide/install-cliv2.html)
-

#### To start

Local environment variable credential

- if you are using Bash

```sh
export AWS_ACCESS_KEY_ID=(your access key id)
export AWS_SECRET_ACCESS_KEY=(your secret access key)
export AWS_DEFAULT_REGION=(your-region)
```

- or if you are using CMD

```sh
set AWS_ACCESS_KEY_ID=(your access key id)
set AWS_SECRET_ACCESS_KEY=(your secret access key)
set AWS_DEFAULT_REGION=(your-region)
```

- or if you are using PowerShell

```sh
$env:AWS_ACCESS_KEY_ID="(your access key id)"
$env:AWS_SECRET_ACCESS_KEY="(your secret access key)"
$env:AWS_DEFAULT_REGION="(your-region)"
```

create Terraform file main.tf then add a [aws provider](https://www.terraform.io/docs/providers/aws/index.html).

For Terraform 13 compatibility

```sh
$ terraform 0.13upgrade .
```

The terraform init command is used to initialize a working directory containing Terraform configuration files.

```sh
$ terraform init
```

The terraform plan command is used to create an execution plan.

```sh
$ terraform plan
```

The terraform apply command is used to apply the changes required to reach the desired state of the configuration, or the pre-determined set of actions generated by a terraform plan execution plan.

Check your aws console after running this.

```sh
$ terraform apply
```

```sh
$ curl http://<EC2_INSTANCE_PUBLIC_IP>:8080
```

- Create SSH Key

```sh
ssh-keygen -t rsa -b 2048 -f mykey
```

- Use SSH Client

```sh
ssh -i /path/my-key-pair.pem my-instance-user-name@my-instance-public-dns-name
```

The terraform destroy command is used to destroy the Terraform-managed infrastructure.

```sh
$ terraform destroy
```
